# JVMのアーキテクチャ
JVMのアーキテクチャはクラス・ローダー・サブシステムから始まる様々なコンポーネントで構成されている

*クラス・ローダー・サブシステム*
→Javaの.classファイルをメモリにロードする役割を担っている

*メモリ領域*
* メソッド領域
* ヒープ領域
* スタック領域
* PCレジスタ
* ネイティブメソッドスタック

*実行エンジン*
→Javaプログラムを実行するためのコンポーネント

## Class Loaders
クラスローダーはデリゲーションモデルに従う

1 JVMがアプリケーション・クラスに出会ったとき、まずそのクラスがすでにメソッド領域にあるかどうかをチェックし、なければクラス・ローダー・システムにクラスをロードするよう依頼する
2 アプリケーション・クラスローダーは、要求をエクステンション・クラスローダーに委譲し、エクステンション・クラスローダーはブートストラップ・クラスローダーに要求する
3 この時点で、階層の最上位にあるブートストラップ・クラスローダは、 jre/lib/*.jar であるブートストラップ・クラスパスをチェックする。もしクラスがそこにあれば、それをロードし、クラスがなければ、要求をエクステンション・クラスローダーに委譲する
4 Extension Classloaderは、ext/*.jarをチェックし、クラスがあれば、それをメモリにロードする。なければアプリケーション・クラスローダーに移譲する
5 最後に、リクエストがアプリケーションクラスローダに委譲されると、アプリケーションクラスローダはアプリケーションクラスパスとその下のjar（jdbc.jar, hibernate.jar）をチェックし、クラスがあればそれらをロードする
6 もし見つからなければ、NoClassDefFoundExceptionかClassNotFoundExceptionをランタイムに投げることになる。

クラス・ローダー・システムは３種類のクラス・ローダーで構成されている

*ブートストラップ・クラス・ローダー*

JDK/JRE/libフォルダの下のrt.jarの中にあるクラス（JDKのインストールに付属するAPIクラス→全てのJavaプログラムで使用することができるライブラリ）をロードする
このクラスローダーは全てのJavaインストールに付属している

*エクステンション・クラス・ローダー*

JDK/JRE/libのextフォルダーからクラスをロードする（security.jar, JDBC.jarなど）
クラスはsun.misc.Launcher$ExtClassLoader.class

*アプリケーション・クラス・ローダー*

クラスパスの環境変数に置いた、アプリケーション・クラス（作成したクラス）を全てロードする
クラスはsun.misc.Launcher$ApplicationClassLoader.class
